# âœ¨ è©³è§£ç³»çµ±å…¨é¢å„ªåŒ–å®Œæˆ

> **æ—¥æœŸ**: 2025-01-27  
> **ç‹€æ…‹**: âœ… æ‰€æœ‰å„ªåŒ–å·²å®Œæˆ

## ğŸ¯ å„ªåŒ–ç›®æ¨™

è®“è©³è§£è¼¸å‡ºæˆç‚ºã€Œä¸€æ®µé‚è¼¯ç²¾æº–ã€èªæ„æ¸…æ¥šã€å¯ç›´æ¥æ”¾åœ¨é¡Œç›®æ—é‚Šã€çš„å…§å®¹ï¼Œä¸éœ€è¦åˆ†æˆå¤šå±¤æ­¥é©Ÿæˆ–é‡è¤‡æ¨™é¡Œï¼Œè€Œæ˜¯è‡ªç„¶å‘ˆç¾ä¸€æ®µé€£è²«çš„è§£é‡‹ã€‚

## âœ… å®Œæˆçš„å„ªåŒ–

### 1. âœ… ç§»é™¤é‡è¤‡æ¨™é¡Œï¼Œçµ±ä¸€æ ¼å¼

**å•é¡Œ**ï¼š
- ã€Œè§£æã€ä¸‹åˆæœ‰ã€Œè§£é¡Œæ­¥é©Ÿã€ç­‰é‡è¤‡å°æ¨™
- æ¨™é¡Œå±¤ç´šéå¤šï¼Œè¦–è¦ºæ··äº‚

**ä¿®å¾©**ï¼š
- âœ… åªä¿ç•™ã€Œè§£æã€æ¨™é¡Œ
- âœ… ç§»é™¤æ‰€æœ‰ã€Œè§£é¡Œæ­¥é©Ÿã€æ¨™è¨˜
- âœ… å…§æ–‡ç›´æ¥è¼¸å‡ºæ¨è«–å¥ï¼ˆreasoningï¼‰
- âœ… Counterpoints ä½¿ç”¨ç°¡æ½”æ ¼å¼ï¼šAï¼š... Bï¼š... Dï¼š...

**UI çµæ§‹ï¼ˆä¿®å¾©å¾Œï¼‰**ï¼š
```
è§£æ
  â””â”€ æ¨è«–å¥ï¼ˆreasoningï¼Œæ‰“å­—æ©Ÿæ•ˆæœï¼‰
  â””â”€ éŒ¯èª¤é¸é …èªªæ˜ï¼ˆcounterpointsï¼ŒAï¼š... Bï¼š... Dï¼š...ï¼‰
  â””â”€ è­‰æ“šå¥ï¼ˆå…§åµŒå¼•ç”¨ï¼Œç„¡æ¨™ç±¤ï¼‰
```

### 2. âœ… æ”¹é€² LLM Promptï¼Œè¦æ±‚è‡ªç„¶èªæ°£

**å•é¡Œ**ï¼š
- Prompt è¦æ±‚ã€Œè§£é¡Œæ­¥é©Ÿã€æ ¼å¼
- å°è‡´è¼¸å‡ºä½¿ç”¨æ ¼å¼åŒ–èªè¨€ï¼ˆæ­¥é©Ÿä¸€ã€æ­¥é©ŸäºŒï¼‰

**ä¿®å¾©**ï¼š
- âœ… æ˜ç¢ºè¦æ±‚ã€Œè‡ªç„¶ã€é€£è²«çš„æ¨è«–å¥ã€
- âœ… ç¦æ­¢ä½¿ç”¨ã€Œè§£é¡Œæ­¥é©Ÿã€ã€Œæ­¥é©Ÿä¸€ã€æ­¥é©ŸäºŒã€ç­‰æ ¼å¼åŒ–èªè¨€
- âœ… è¦æ±‚ã€Œåƒè€å¸«åœ¨æ—é‚Šè§£é‡‹ä¸€æ¨£ï¼šç›´æ¥ã€ç²¾æº–ã€æœ‰é‚è¼¯ã€
- âœ… è¦æ±‚å¼•ç”¨åŸæ–‡è­‰æ“šå¥ï¼ˆä½¿ç”¨å¼•è™Ÿæ¨™è¨»ï¼‰

**æ–° Prompt æ ¼å¼**ï¼š
```typescript
reasoning: "The word 'dilemma' refers to the difficulty of shifting from one-size-fits-all standardized tests to student-centered assessments. The passage says, 'States are rethinking... student-centered assessments. Obviously, the task is difficult and time-consuming. Fortunately, modern technology can help solve this dilemma.' Hence, the dilemma is whether or not to adopt student-centered assessment."
```

### 3. âœ… ä¿®å¾© Context æˆªæ–·å•é¡Œ

**å•é¡Œ**ï¼š
- Passage è¢«æˆªæ–·åˆ° 600 å­—å…ƒï¼Œå¯èƒ½å°è‡´ä¸Šä¸‹æ–‡ä¸å®Œæ•´

**ä¿®å¾©**ï¼š
- âœ… ç§»é™¤ 600 å­—å…ƒé™åˆ¶
- âœ… ä½¿ç”¨å®Œæ•´ passageï¼ˆ`finalPassage = passage || stem`ï¼‰
- âœ… ç¢ºä¿ LLM èƒ½çœ‹åˆ°å®Œæ•´ä¸Šä¸‹æ–‡

### 4. âœ… æ”¹é€² Post-processor é‚è¼¯

**å•é¡Œ**ï¼š
- `explain-presenter.ts` æœƒç”Ÿæˆã€Œã€è§£é¡Œæ­¥é©Ÿã€‘ã€æ ¼å¼çš„ fallback reasoning

**ä¿®å¾©**ï¼š
- âœ… å„ªå…ˆä½¿ç”¨ AI ç”Ÿæˆçš„ reasoningï¼ˆå·²ç¶“æ˜¯è‡ªç„¶èªæ°£ï¼‰
- âœ… è‡ªå‹•ç§»é™¤ä»»ä½•ã€Œè§£é¡Œæ­¥é©Ÿã€æ¨™è¨˜ï¼ˆå¦‚æœ LLM æ„å¤–åŒ…å«ï¼‰
- âœ… Fallback reasoning ä¹Ÿæ”¹ç‚ºè‡ªç„¶èªæ°£ï¼ˆä¸ä½¿ç”¨æ­¥é©Ÿæ ¼å¼ï¼‰

**é—œéµä»£ç¢¼**ï¼š
```typescript
// Use AI-generated reasoning directly (should already be natural, teacher-like)
if (hasReasoning && explanation.reasoning) {
  // Remove any "è§£é¡Œæ­¥é©Ÿ" markers if LLM accidentally included them
  reasoningText = explanation.reasoning
    .replace(/ã€è§£é¡Œæ­¥é©Ÿã€‘/g, '')
    .replace(/^æ­¥é©Ÿ[ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å\d]+[ï¼š:]\s*/g, '')
    .replace(/^\d+[\.\)]\s*/g, '')
    .trim()
}
```

### 5. âœ… é‡æ§‹ UIï¼šæ•´åˆ Reasoning + Counterpoints

**ä¿®å¾©å‰**ï¼š
```
è§£æ
  â””â”€ ã€è§£é¡Œæ­¥é©Ÿã€‘1) å®šä½... 2) åˆ†æ...
è­‰æ“š
  â””â”€ "è­‰æ“šå¥"
```

**ä¿®å¾©å¾Œ**ï¼š
```
è§£æ
  â””â”€ The word 'dilemma' refers to... (è‡ªç„¶æ¨è«–å¥)
  â””â”€ Aï¼šåªæ˜¯èˆ‰ä¾‹æ¨™æº–åŒ–æ¸¬é©—ï¼Œèˆ‡å…©é›£ç„¡é—œã€‚
      Bï¼šåªæ˜¯æ³•å¾‹èƒŒæ™¯ï¼Œéæ®µè½é‡é»ã€‚
      Dï¼šæ–‡ä¸­èªªç§‘æŠ€ç”¨ä¾†ã€è§£æ±ºã€å…©é›£ï¼Œè€Œéæ§‹æˆå…©é›£ã€‚
  â””â”€ "States are rethinking... student-centered assessments..." (å…§åµŒå¼•ç”¨)
```

### 6. âœ… ç§»é™¤è­‰æ“šæ¨™ç±¤ï¼Œæ”¹ç‚ºå…§åµŒå¼•ç”¨

**ä¿®å¾©**ï¼š
- âœ… ç§»é™¤ã€Œè­‰æ“šã€æ¨™ç±¤
- âœ… è­‰æ“šå¥æ”¹ç‚ºå…§åµŒå¼•ç”¨ï¼ˆç„¡æ¨™ç±¤ï¼Œåƒ…æ–œé«”ï¼‰
- âœ… ä¿ç•™é»æ“Šå®šä½åŠŸèƒ½ï¼ˆhover æ•ˆæœï¼‰

### 7. âœ… å„ªåŒ–æ‰“å­—æ©Ÿå‹•ç•«é‚è¼¯

**Phase 1 (æ€è€ƒéšæ®µ)**ï¼š
- âœ… è‡ªå‹•è¼ªæ’­çŸ­èªï¼ˆæ¯ 1.7 ç§’ï¼‰
- âœ… çŸ­èªï¼šã€Œæ­£åœ¨åˆ†æé¡Œç›®â€¦ã€ã€Œæ­£åœ¨æª¢æŸ¥é—œéµå­—â€¦ã€ã€Œæ­£åœ¨å®šä½è­‰æ“šå¥â€¦ã€ã€Œæ­£åœ¨ç”Ÿæˆè©³è§£â€¦ã€
- âœ… å¹³æ»‘æ·¡å…¥æ·¡å‡ºéæ¸¡

**Phase 2 (ç”Ÿæˆéšæ®µ)**ï¼š
- âœ… åªåœ¨æœ€çµ‚è§£é‡‹æ–‡å­—åˆ°é”å¾Œå•Ÿå‹•æ‰“å­—æ©Ÿæ•ˆæœ
- âœ… ä¸å° JSON æˆ–åŸå§‹è³‡æ–™é€²è¡Œæ‰“å­—å‹•ç•«
- âœ… å¹³æ»‘æ·¡å…¥è½‰å ´ï¼ˆfade-inï¼‰

### 8. âœ… å¢å¼·é©—è­‰é‚è¼¯

**æ–°å¢é©—è­‰**ï¼š
- âœ… æª¢æŸ¥ reasoning æ˜¯å¦åŒ…å«å¼•è™Ÿï¼ˆè­‰æ“šå¼•ç”¨ï¼‰
- âœ… æª¢æŸ¥ reasoning æ˜¯å¦åŒ…å«ã€Œè§£é¡Œæ­¥é©Ÿã€æ ¼å¼ï¼ˆç¦æ­¢ï¼‰
- âœ… æª¢æŸ¥ reasoning é•·åº¦ï¼ˆâ‰¥20 å­—ï¼‰
- âœ… æª¢æŸ¥ counterpoints æ˜¯å¦ä½¿ç”¨ç©ºæ³›èªè¨€ï¼ˆç¦æ­¢ï¼‰

**é‡è©¦æ©Ÿåˆ¶**ï¼š
- âœ… å¦‚æœé©—è­‰å¤±æ•—ï¼Œè‡ªå‹•é‡è©¦ä¸¦æ˜ç¢ºè¦æ±‚è‡ªç„¶èªæ°£
- âœ… é‡è©¦ prompt å¼·èª¿ç¦æ­¢ã€Œè§£é¡Œæ­¥é©Ÿã€æ ¼å¼

## ğŸ“Š å°æ¯”ç¤ºä¾‹

### ä¿®å¾©å‰ï¼ˆæ ¼å¼åŒ–ã€å¤šå±¤æ¨™é¡Œï¼‰

```
è§£æ
ã€è§£é¡Œæ­¥é©Ÿã€‘1) å®šä½é¡Œå¹¹é—œéµè©ã€Œdilemmaã€ï¼›2) åœ¨æ–‡ä¸­å°‹æ‰¾åŒ…å«è©²è©çš„èªå¢ƒï¼Œç™¼ç¾ whether å­å¥è¡¨é”ã€ŒæŠ‰æ“‡ã€ï¼›3) æ¯”å°å„é¸é …èªç¾©ï¼Œé¸å‡ºæœ€èƒ½å‘¼æ‡‰æ­¤èªå¢ƒçš„é¸é …ã€‚

è­‰æ“š
"States are rethinking... student-centered assessments."
```

### ä¿®å¾©å¾Œï¼ˆè‡ªç„¶èªæ°£ã€å–®ä¸€æ¨™é¡Œï¼‰

```
è§£æ
The word 'dilemma' refers to the difficulty of shifting from one-size-fits-all standardized tests to student-centered assessments. The passage says, 'States are rethinking... student-centered assessments. Obviously, the task is difficult and time-consuming. Fortunately, modern technology can help solve this dilemma.' Hence, the dilemma is whether or not to adopt student-centered assessment.

Aï¼šåªæ˜¯èˆ‰ä¾‹æ¨™æº–åŒ–æ¸¬é©—ï¼Œèˆ‡å…©é›£ç„¡é—œã€‚
Bï¼šåªæ˜¯æ³•å¾‹èƒŒæ™¯ï¼Œéæ®µè½é‡é»ã€‚
Dï¼šæ–‡ä¸­èªªç§‘æŠ€ç”¨ä¾†ã€è§£æ±ºã€å…©é›£ï¼Œè€Œéæ§‹æˆå…©é›£ã€‚

"States are rethinking... student-centered assessments..."
```

## ğŸ› ï¸ æŠ€è¡“å¯¦ç¾ç´°ç¯€

### ä¿®æ”¹çš„æª”æ¡ˆ

1. **`apps/web/lib/english/templates.ts`**
   - âœ… æ”¹é€² promptï¼šè¦æ±‚è‡ªç„¶èªæ°£ï¼Œç¦æ­¢ã€Œè§£é¡Œæ­¥é©Ÿã€æ ¼å¼
   - âœ… ç§»é™¤ passage æˆªæ–·ï¼ˆ600 å­—å…ƒé™åˆ¶ï¼‰
   - âœ… å¢å¼·é©—è­‰é‚è¼¯ï¼ˆæª¢æŸ¥æ ¼å¼ã€å¼•è™Ÿã€é•·åº¦ï¼‰

2. **`apps/web/lib/english/templates-streaming.ts`**
   - âœ… åŒæ­¥ prompt æ”¹é€²
   - âœ… ç§»é™¤ passage æˆªæ–·

3. **`apps/web/lib/mapper/explain-presenter.ts`**
   - âœ… å„ªå…ˆä½¿ç”¨ AI ç”Ÿæˆçš„ reasoning
   - âœ… è‡ªå‹•ç§»é™¤ã€Œè§£é¡Œæ­¥é©Ÿã€æ¨™è¨˜
   - âœ… Fallback reasoning æ”¹ç‚ºè‡ªç„¶èªæ°£

4. **`apps/web/components/solve/explain/ReadingExplain.tsx`**
   - âœ… ç§»é™¤é‡è¤‡æ¨™é¡Œ
   - âœ… æ•´åˆ reasoning + counterpoints
   - âœ… è­‰æ“šå¥æ”¹ç‚ºå…§åµŒå¼•ç”¨ï¼ˆç„¡æ¨™ç±¤ï¼‰

5. **`apps/web/components/solve/StreamingExplainPlaceholder.tsx`**
   - âœ… å„ªåŒ–çŸ­èªè¼ªæ’­ï¼ˆ1.7 ç§’é–“éš”ï¼‰
   - âœ… æ”¹é€²æ¶ˆæ¯æ–‡å­—ï¼ˆä½¿ç”¨ã€Œâ€¦ã€è€Œéã€Œ...ã€ï¼‰

## âœ… é©—è­‰æ¸…å–®

### Prompt æ”¹é€²
- âœ… è¦æ±‚è‡ªç„¶èªæ°£ï¼ˆç¦æ­¢ã€Œè§£é¡Œæ­¥é©Ÿã€æ ¼å¼ï¼‰
- âœ… è¦æ±‚å¼•ç”¨åŸæ–‡è­‰æ“šå¥ï¼ˆä½¿ç”¨å¼•è™Ÿï¼‰
- âœ… è¦æ±‚æ˜ç¢ºèªªæ˜ã€Œæ–‡ç« ä¸­çš„ XXX å°æ‡‰é¸é …ä¸­çš„ YYYã€

### Context å®Œæ•´æ€§
- âœ… ç§»é™¤ 600 å­—å…ƒæˆªæ–·
- âœ… ä½¿ç”¨å®Œæ•´ passage

### Post-processor ä¿®å¾©
- âœ… è‡ªå‹•ç§»é™¤ã€Œè§£é¡Œæ­¥é©Ÿã€æ¨™è¨˜
- âœ… Fallback reasoning æ”¹ç‚ºè‡ªç„¶èªæ°£
- âœ… å„ªå…ˆä½¿ç”¨ AI ç”Ÿæˆçš„ reasoning

### UI å„ªåŒ–
- âœ… ç§»é™¤é‡è¤‡æ¨™é¡Œï¼ˆåªä¿ç•™ã€Œè§£æã€ï¼‰
- âœ… æ•´åˆ reasoning + counterpoints
- âœ… è­‰æ“šå¥æ”¹ç‚ºå…§åµŒå¼•ç”¨ï¼ˆç„¡æ¨™ç±¤ï¼‰
- âœ… Counterpoints ä½¿ç”¨ç°¡æ½”æ ¼å¼ï¼ˆAï¼š... Bï¼š... Dï¼š...ï¼‰

### å‹•ç•«å„ªåŒ–
- âœ… Phase 1: æ€è€ƒéšæ®µè‡ªå‹•è¼ªæ’­ï¼ˆ1.7 ç§’ï¼‰
- âœ… Phase 2: åªåœ¨æœ€çµ‚è§£é‡‹æ™‚å•Ÿå‹•æ‰“å­—æ©Ÿæ•ˆæœ
- âœ… å¹³æ»‘æ·¡å…¥æ·¡å‡ºéæ¸¡

## ğŸ‰ ç¸½çµ

æ‰€æœ‰å„ªåŒ–å·²å®Œæˆï¼š

1. **æ ¼å¼çµ±ä¸€** âœ…
   - ç§»é™¤é‡è¤‡æ¨™é¡Œï¼Œåªä¿ç•™ã€Œè§£æã€
   - è‡ªç„¶èªæ°£çš„æ¨è«–å¥ + ç°¡æ½”çš„ counterpoints

2. **Prompt æ”¹é€²** âœ…
   - è¦æ±‚è‡ªç„¶èªæ°£ï¼Œç¦æ­¢æ ¼å¼åŒ–èªè¨€
   - è¦æ±‚å¼•ç”¨åŸæ–‡è­‰æ“šå¥

3. **Context å®Œæ•´æ€§** âœ…
   - ç§»é™¤æˆªæ–·ï¼Œä½¿ç”¨å®Œæ•´ passage

4. **Post-processor ä¿®å¾©** âœ…
   - è‡ªå‹•ç§»é™¤ã€Œè§£é¡Œæ­¥é©Ÿã€æ¨™è¨˜
   - Fallback æ”¹ç‚ºè‡ªç„¶èªæ°£

5. **UI å„ªåŒ–** âœ…
   - æ•´åˆ reasoning + counterpoints
   - è­‰æ“šå¥æ”¹ç‚ºå…§åµŒå¼•ç”¨

6. **å‹•ç•«å„ªåŒ–** âœ…
   - æ€è€ƒéšæ®µè‡ªå‹•è¼ªæ’­
   - æ‰“å­—æ©Ÿæ•ˆæœåªåœ¨æœ€çµ‚è§£é‡‹æ™‚å•Ÿå‹•

ç¾åœ¨çš„è©³è§£ç³»çµ±æä¾›äº†ï¼š
- ğŸ¯ ç²¾æº–ã€æ¸…æ™°çš„æ¨è«–ï¼ˆåƒäººé¡è€å¸«ä¸€æ¨£ï¼‰
- ğŸ“š è‡ªç„¶èªæ°£çš„è§£é‡‹ï¼ˆä¸ä½¿ç”¨æ ¼å¼åŒ–èªè¨€ï¼‰
- ğŸ¨ æ¥µç°¡ä¸”å°ˆæ¥­çš„ UIï¼ˆç„¡é‡è¤‡æ¨™é¡Œï¼‰
- âœ¨ æµæš¢çš„å‹•ç•«é«”é©—ï¼ˆChatGPT é¢¨æ ¼ï¼‰

ç¬¦åˆä¸–ç•Œé ‚å°– UI/UX è¨­è¨ˆå¸«å’Œè‹±èªå­¸ç¿’å°ˆå®¶çš„æ¨™æº–ï¼ğŸš€

